type Index @entity {
  id: Bytes!
  holders: BigInt!
  assets: [IndexAsset!]!
  history: [HistoricalIndexBalances!]! @derivedFrom(field:"index")
}

type Account @entity {
  id: Bytes!
  indices: [IndexAccount!]! @derivedFrom(field:"account")
  history: [HistoricalAccountBalances!]! @derivedFrom(field:"account")
}

type Asset @entity {
  id: Bytes!
  indices: [IndexAsset!]! @derivedFrom(field:"asset")
}

type HistoricalIndexBalances @entity {
  id: String!
  index: Index!
  assets: [IndexAsset!]!
}

type IndexAsset @entity {
  id: Bytes!
  index: Bytes!
  asset: Asset!
  balance: BigInt!
  weight: Int!
}

type IndexAccount @entity {
  id: Bytes!
  index: Bytes!
  account: Account!
  balance: BigInt!
}

type HistoricalAccountBalances @entity {
  id: String!
  index: Bytes! 
  account: Account!
  balance: BigInt!
}