type Index @entity {
  id: Bytes!
  mintingFee: BigDecimal!
  redemptionFee: BigDecimal!
  aumFee: BigDecimal!
  holders: BigInt!
  assets: [IndexAsset!]!
  history: [HistoricalIndexBalances!]! @derivedFrom(field:"index")
}

type Asset @entity {
  id: Bytes!
  indices: [IndexAsset!]! @derivedFrom(field:"asset")
}

type Account @entity {
  id: Bytes!
  indices: [IndexAccount!]! @derivedFrom(field:"account")
  history: [HistoricalAccountBalances!]! @derivedFrom(field:"account")
}

type IndexAsset @entity {
  id: Bytes!
  index: Bytes!
  asset: Asset!
  balance: BigDecimal!
  weight: Int!
}

type IndexAccount @entity {
  id: Bytes!
  index: Bytes!
  account: Account!
  balance: BigDecimal!
}

type HistoricalIndexBalances @entity {
  id: String!
  timestamp: BigInt!
  index: Index!
  assets: [IndexAsset!]!
}

type HistoricalAccountBalances @entity {
  id: String!
  timestamp: BigInt!
  index: Bytes! 
  account: Account!
  balance: BigDecimal!
}type Approval @entity(immutable: true) {
  id: Bytes!
  owner: Bytes! # address
  spender: Bytes! # address
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DelegateChanged @entity(immutable: true) {
  id: Bytes!
  delegator: Bytes! # address
  fromDelegate: Bytes! # address
  toDelegate: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type DelegateVotesChanged @entity(immutable: true) {
  id: Bytes!
  delegate: Bytes! # address
  previousBalance: BigInt! # uint256
  newBalance: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Transfer @entity(immutable: true) {
  id: Bytes!
  from: Bytes! # address
  to: Bytes! # address
  amount: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
