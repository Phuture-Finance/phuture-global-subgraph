type Index @entity {
  id: Bytes!
  decimals: Int!
  mintingFee: BigDecimal!
  redemptionFee: BigDecimal!
  aumFee: BigDecimal!
  holders: BigInt!
  assets: [IndexAsset!]!
  history: [HistoricalIndexBalance!]! @derivedFrom(field:"index")
}

type Asset @entity {
  id: Bytes!
  decimals: Int!
  indices: [IndexAsset!]! @derivedFrom(field:"asset")
}

type Account @entity {
  id: Bytes!
  indices: [IndexAccount!]! @derivedFrom(field:"account")
  history: [HistoricalAccountBalance!]! @derivedFrom(field:"account")
}

type IndexAsset @entity {
  id: Bytes!
  index: Bytes!
  asset: Asset!
  balance: BigDecimal!
  weight: Int!
}

type IndexAccount @entity {
  id: Bytes!
  index: Bytes!
  account: Account!
  balance: BigDecimal!
}

type HistoricalIndexBalance @entity {
  id: String!
  timestamp: BigInt!
  index: Index!
  assets: [IndexAsset!]!
}

type HistoricalAccountBalance @entity {
  id: String!
  timestamp: BigInt!
  index: Bytes! 
  account: Account!
  balance: BigDecimal!
}